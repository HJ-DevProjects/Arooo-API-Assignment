<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${content.title}">콘텐츠 상세</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/cerulean/bootstrap.min.css" rel="stylesheet">
  <!-- Meta -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Bootstrap Knowledge Base and Help Centre Template">
  <meta name="author" content="Xiaoying Riley at 3rd Wave Media">
  <link rel="shortcut icon" href="resources/static/favicon.ico">

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <!-- FontAwesome JS-->
  <script defer src="resources/static/assets/fontawesome/js/all.min.js"></script>

  <!-- Plugin CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark-reasonable.min.css">

  <!-- Theme CSS -->
  <link id="theme-style" rel="stylesheet" href="resources/static/assets/css/devdesk.css">
</head>

<body>
  <div class="container">
    <header class="article-header mb-5">
      <h1 th:text="${content.title}" class="heading-level-1 text-center mb-2">Help Article Lorem Ipsum Dolor</h1>
    </header>
  </div>

  <div class="item">
    <div class="item-inner shadow rounded-4 p-4">
      <div class="help-content-wrapper theme-section pt-4">
        <div class="container">
          <div class="row">
            <div class="col-lg-8 col-xl-9">
              <section class="main-section order-lg-last">
                <article class="help-article mb-5"></article>

                  <p th:text="${content.mainText}">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec sodales, ligula non congue placerat, felis nibh dapibus risus, id sollicitudin quam libero ac libero. Ut massa massa, varius vitae volutpat in, sodales et mi. Mauris sed tempor turpis. Nullam sodales dapibus lacus non tempor Integer aliquet quam sed ipsum imperdiet vehicula.</p>
                  <div class="d-flex border-top pt-3 mt-4">
                    <button id="like-button">Likes</button><small id="like-count" th:text="${content.likes}"><h3><strong> 0 </strong></h3></small>
                  </div>
              </section>
            </div><!--//row-->
          </div><!--//row-->
        </div><!--//container-->
      </div><!--//help-content-wrapper-->
    </div><!--//container-->
  </div><!--//help-content-wrapper-->
  <script>
    document.getElementById('like-button').addEventListener('click', function() {
      // 여기에 좋아요 버튼 클릭 시 API를 호출하는 JavaScript 코드 추가
      const contentId = [[${content.id}]];
      const requestUrl = `/api/library/content/${contentId}/like`;

      // fetch API using POST
      fetch(requestUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          contentId: contentId
        })
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById('like-count').innerText = data.likes;
      })
      .catch(error => {
        console.error('Error: ', error);
      })

    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>